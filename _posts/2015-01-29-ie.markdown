---
layout: post
title:  "用ajax的get又一不小心被IE坑了"
date:   2015-01-29
categories: other
---

##用ajax的get又一不小心被IE坑了##
這幾天因為澳門衛生局要求，給各個門診都部署了實時回傳候診人數的功能，其它客戶診所的回傳都沒問題，唯獨有一客戶的回傳數據是偶爾有效，最被沒想到是緩存問題，因為都是同樣的程序，其它的客戶部署正有正常的返回數據，就這家不一樣。

很頭痛，于是乎一一的檢測查代碼，檢查KEY，還讓衛生局那邊的技術配合一起查，對方說，可以看到最近2小時的IP請求記錄里，沒看到該客戶的IP出現，但是介於我這邊的發送日志都有提示某時某分成功的標記，依然沒有想到與IE的緩存有關系，當然這里與客戶使用的是QQ瀏覽器有點關系，一直沒用過它，當看到是QQ瀏覽器，我想當然的以為其也是使用的chrome內核。直到按下F12看下網絡請求才知，這界面怎麼這麼熟悉，原是QQ瀏覽器用的是IE內核。再看看請求記錄，果然除了首次外，后面的都是在本地了。。悲催啊，之前還一直查其它問題，于果，果斷加上當獲取前時間做為GET參數之一，果然正常。

其實早前也清楚在GET方式使用時，最好帶上一個隨機數以防在IE中因為緩存而出現問題，可能今次因為其它家診所都是非IE瀏覽器，所以就忽略了這個問題了。

唉！！這個坑讓我記憶猶新。
